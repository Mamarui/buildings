(function(t){function e(e){for(var n,r,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("6f44"),o=a.n(n);o.a},2110:function(t,e,a){},"3ed4":function(t,e,a){"use strict";var n=a("4313"),o=a.n(n);o.a},4313:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("c160");var n=a("c872"),o=(a("f3b4"),a("0925")),s=(a("4df7"),a("94c2")),r=(a("3449"),a("1864")),i=(a("6494"),a("9f16")),c=(a("b2d0"),a("e076")),u=(a("68f2"),a("2d1c")),l=(a("8d78"),a("287a")),d=(a("ef00"),a("87a3")),f=(a("b704"),a("686b")),v=(a("e97c"),a("b540")),m=(a("1792"),a("5853")),p=(a("c8f7"),a("d18a")),h=(a("1a89"),a("2e1b")),g=(a("1c75"),a("af55")),_=(a("ddcf"),a("8466")),b=(a("3803"),a("ebfb")),y=(a("2ad1"),a("3e8f")),k=(a("d9a3"),a("c9db"),a("de3e"),a("618d"),a("0261")),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},w=[],S={name:"app"},$=S,x=(a("034f"),a("623f")),I=Object(x["a"])($,C,w,!1,null,null,null),P=I.exports,O=a("1bee"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{title:t.$route.query.name,"left-arrow":""},on:{"click-left":t.onClickLeft}}),a("van-cell-group",{staticClass:"cellGroup"},[a("van-cell",{attrs:{title:"货机名","is-link":"",value:t.info.name}}),a("van-cell",{attrs:{title:"管理员","is-link":"",value:t.info.manager}}),a("van-cell",{attrs:{title:"机身条码",value:t.info.surface_no}}),a("van-cell",{attrs:{title:"货机型号",value:t.info.model}})],1),t.info.list!=[]?a("div",{staticClass:"product"},[a("table",[t._m(0),a("tbody",t._l(t.info.list,(function(e,n){return a("tr",{key:n},[a("th",[t._v(t._s(e.cid))]),a("th",[t._v(t._s(e.goods_name))]),a("th",[t._v(t._s(e.amount))]),a("th",[t._v(t._s(e.inventory))]),a("th",[a("van-button",{staticClass:"btn",attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(a){return t.tabToSupply(e.cid)}}},[t._v("补货")])],1)])})),0)])]):t._e(),a("van-tabbar",{on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"cancel"}},[t._v("取消")])],1)],1)},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("td",[t._v("位置")]),a("td",[t._v("商品")]),a("td",[t._v("货柜存量")]),a("td",[t._v("库存")]),a("td",[t._v("操作")])])}],T=(a("3a20"),a("debc")),M=a.n(T);function E(t,e,a){return console.log(e),new Promise((function(n,o){M.a.ajax({type:a,url:"https://scm.irobotzz.com"+t,data:e,dataType:"json",success:function(t){n(t)},error:function(t){o(t)}})}))}var q=E,z={data:function(){return{info:{},active:""}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var t=this;q("/api/wechat/mmc/container/info",{id:sessionStorage.getItem("id")},"get").then((function(e){200==e.status&&(t.info=e.data)}),(function(t){alert(t)}))},onClickLeft:function(){this.$router.push("/")},tabToSupply:function(t){this.$router.push({name:"counterSupply",query:{id:t}})},changeTabs:function(){"cancel"==this.active?(alert("取消"),this.$router.push("/")):(alert("一键补货"),this.$router.push({name:"counterSupOnce",query:{list:this.info.list}}))}}},D=z,U=(a("b030"),Object(x["a"])(D,j,L,!1,null,"1c4da02c",null)),K=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{title:"补换货","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("van-cell-group",{staticClass:"cellGroup"},[a("van-cell",{attrs:{title:"货机名",value:t.info.name}}),a("van-cell",{attrs:{title:"位置",value:t.info.grid_id}}),a("van-field",{attrs:{readonly:"",clickable:"",label:"商品类型","input-align":"right",value:t.info.category},on:{click:function(e){return t.showPicker("category")}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker_category,callback:function(e){t.showPicker_category=e},expression:"showPicker_category"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){return t.onCancel("category")},confirm:t.onConfirm_category}})],1),a("van-field",{attrs:{readonly:"",clickable:"",label:"商品名称","input-align":"right",value:t.info.goods_name},on:{click:function(e){return t.showPicker("goods_name")}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker_goods_name,callback:function(e){t.showPicker_goods_name=e},expression:"showPicker_goods_name"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){return t.onCancel("goods_name")},confirm:t.onConfirm_goodsname}})],1),a("van-cell",{attrs:{title:"库存数",value:t.info.inventory}}),a("van-cell",{attrs:{title:"补货量","is-link":"",value:t.info.supply_num}})],1),a("van-tabbar",{on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"cancel"}},[t._v("取消")]),a("van-tabbar-item",{attrs:{name:"done"}},[t._v("完成")])],1)],1)},F=[],G=(a("7ae7"),a("c354"),{data:function(){return{active:"",info:{},columns:[],showPicker_category:!1,showPicker_goods_name:!1}},mounted:function(){this.getInfo()},methods:{onClickLeft:function(){this.$router.push({name:"counterDetail"})},getInfo:function(){var t=this;q("/api/wechat/cmc/container/grid",{id:this.$route.query.id},"get").then((function(e){200==e.status&&(t.info=e.data,t.info.supply_num="")}),(function(t){alert(t)}))},showPicker:function(t){var e=this,a="";"category"==t?(a="/api/wechat/mmc/goods/catlist",this.showPicker_category=!0):(a="/api/wechat/mmc/goods/list",this.showPicker_goods_name=!0),q(a,{merchant:sessionStorage.getItem("merchant")},"get").then((function(t){if(200==t.status)if(t.data!=[]&&0!=t.data.length)for(var a=0;a<t.data.length;a++)e.columns.push(t.data[a].name);else e.$toast("暂无数据！")}),(function(t){alert(t)}))},onConfirm_category:function(t,e){this.$toast("当前值：".concat(t,", 当前索引：").concat(e))},onConfirm_goodsname:function(t,e){this.$toast("当前值：".concat(t,", 当前索引：").concat(e))},onCancel:function(t){"category"==t?this.showPicker_category=!1:this.showPicker_goods_name=!1,this.columns=[]},changeTabs:function(){"cancel"==this.active?alert("取消"):alert("完成"),this.$router.push({name:"counterDetail"})}}}),J=G,R=(a("7c6f"),Object(x["a"])(J,B,F,!1,null,"10eba71e",null)),N=R.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{title:"一键补货","left-arrow":""},on:{"click-left":t.onClickLeft}}),t.$route.query.list!=[]&&0!=t.$route.query.list.length?a("div",{staticClass:"product"},[a("table",[t._m(0),a("tbody",t._l(t.$route.query.list,(function(e,n){return a("tr",{key:n},[a("th",[t._v(t._s(e.cid))]),a("th",[t._v(t._s(e.goods_name))]),a("th",[t._v(t._s(e.amount))]),a("th",[t._v(t._s(e.inventory))]),a("th",[a("van-button",{staticClass:"btn",attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(a){return t.tabToSupply(e.cid)}}},[t._v("补货")])],1)])})),0)])]):t._e(),a("van-tabbar",{on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"cancel"}},[t._v("取消")]),a("van-tabbar-item",{attrs:{name:"done"}},[t._v("完成")])],1)],1)},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("td",[t._v("位置")]),a("td",[t._v("商品")]),a("td",[t._v("货柜存量")]),a("td",[t._v("库存")]),a("td",[t._v("操作")])])}],Q={data:function(){return{active:""}},methods:{onClickLeft:function(){this.$router.push({name:"counterDetail"})},changeTabs:function(){"cancel"==this.active?(alert("取消"),this.$router.push({name:"counterDetail"})):alert("完成")}}},V=Q,W=(a("d270"),Object(x["a"])(V,A,H,!1,null,"4c3ae083",null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{title:t.curTitle,"left-arrow":""},on:{"click-left":t.onClickLeft}}),"counterManage"==t.active?a("CounterManage"):t._e(),"orderManage"==t.active?a("OrderManage"):t._e(),a("van-tabbar",{on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"counterManage",icon:"shop-o"}},[t._v("货柜管理")]),a("van-tabbar-item",{attrs:{name:"orderManage",icon:"balance-list-o"}},[t._v("订单管理")])],1)],1)},Z=[],tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("p",{staticClass:"title"},[t._v("当前货机数："+t._s(t.count))]),a("div",{staticClass:"productBox"},t._l(t.product,(function(e,n){return a("div",{key:n,staticClass:"product",on:{click:function(a){return t.goInfo(e.id,e.model)}}},[a("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}}),a("van-tag",{staticClass:"tag_normal",attrs:{mark:"",type:"正常"==e.dto_status?"success":"缺货"==e.dto_status?"danger":"连接断开"==e.dto_status?"warning":""}},[t._v(t._s(e.dto_status))]),a("van-card",{attrs:{tag:0==e.volume?"缺货":"",title:e.model,thumb:""==e.icon?"https://img.yzcdn.cn/vant/t-thirt.jpg":e.icon}},[a("div",{attrs:{slot:"desc"},slot:"desc"},[a("div",{staticClass:"van-ellipsis"},[t._v("货机编码 ： "+t._s(e.surface_no))]),a("div",{staticClass:"van-ellipsis"},[t._v("管理员 ： "+t._s(e.manager))])]),a("div",{staticStyle:{"margin-top":"0.5rem"},attrs:{slot:"tags"},slot:"tags"},[a("p",[a("b",{staticStyle:{"margin-right":"0.5rem"}},[a("i",{staticStyle:{"font-size":"1rem",color:"red","margin-right":"0.5rem"}},[t._v(t._s(e.amount))]),t._v("/")]),t._v(t._s(e.volume))]),a("p",[t._v("在售/容量")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("p",{staticClass:"footer"},[t._v(t._s(e.name))])])])],1)})),0)])},et=[],at=a("2549"),nt={data:function(){return{count:0,product:[],searchForm:{merchant:sessionStorage.getItem("merchant"),manager:12}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;q("/api/wechat/mmc/container/list",Object(at["a"])({},this.searchForm),"get").then((function(e){200==e.status&&(t.count=e.count,t.product=e.data)}),(function(t){alert(t)}))},goInfo:function(t,e){sessionStorage.setItem("id",t),this.$router.push({name:"counterDetail",query:{id:t,name:e}})}}},ot=nt,st=(a("9671"),Object(x["a"])(ot,tt,et,!1,null,"68b5fdb5",null)),rt=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-tabs",{attrs:{type:"card",color:"#1989fa"},on:{click:t.onClick}},[a("van-tab",{attrs:{title:"已支付"}},[t.isLoading?a("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#1989fa"}}):t._e(),a("PayCard",{attrs:{product:t.product}})],1),a("van-tab",{attrs:{title:"未支付"}},[t.isLoading?a("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#1989fa"}}):t._e(),a("PayCard",{attrs:{product:t.product}})],1)],1)],1)},ct=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},t._l(t.product,(function(e,n){return a("div",{key:n+"product",staticClass:"order"},[a("p",{staticClass:"orderState"},[t._v("订单号："+t._s(e.orderId)+" "),a("span",[t._v(t._s(e.order_status))])]),t._l(e.goods_list,(function(t,e){return a("div",{key:e+"goods",staticClass:"product"},[a("van-card",{attrs:{num:t.amount,price:t.goods_price,title:t.name,thumb:""==t.logo?"https://img.yzcdn.cn/vant/t-thirt.jpg":t.logo}})],1)})),a("div",{staticClass:"total"},[a("p",[a("span",[t._v("共"+t._s(e.shopNum)+"件商品，合计 ：")]),t._v("￥"+t._s(e.total))]),a("p",[a("span",[t._v("支付时间 ：")]),t._v(t._s(e.saledate))]),a("p",[t._v(t._s(e.customer))])])],2)})),0)},lt=[],dt={props:["product"],data:function(){return{}},methods:{onClose:function(t,e){switch(t){case"cell":case"outside":e.close();break;case"right":alert("交易成功"),e.close();break}}}},ft=dt,vt=(a("b8d7"),Object(x["a"])(ft,ut,lt,!1,null,"e4739ce6",null)),mt=vt.exports,pt={components:{PayCard:mt},data:function(){return{product_success:[],product_fail:[],product:[],isPay:0,isLoading:!0}},created:function(){this.getList()},methods:{getList:function(){var t=this;q("/api/wechat/cmc/order/list",{merchant:sessionStorage.getItem("merchant"),order_manager:12,order_status:this.isPay},"get").then((function(e){200==e.status&&(t.product=e.data,t.isLoading=!1)}),(function(t){alert(t)}))},onClick:function(t,e){this.product=[],this.isPay="已支付"==e?0:1,this.isLoading=!0,this.getList()}}},ht=pt,gt=(a("3ed4"),Object(x["a"])(ht,it,ct,!1,null,"7250045a",null)),_t=gt.exports,bt=(a("b128"),a("b3f9"),a("7267"),a("d780"),{getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}}),yt={components:{CounterManage:rt,OrderManage:_t},data:function(){return{active:"counterManage",curTitle:"货机管理"}},created:function(){var t=this,e=bt.getUrlKey("code"),a=bt.getUrlKey("state");q("/api/oauth/mp/authorize",{state:a,code:e},"get").then((function(e){200==e.status&&(sessionStorage.setItem("user_id",e.data.user_id),e.data.hasbind?(sessionStorage.setItem("avatar",e.data.avatar),sessionStorage.setItem("name",e.data.name),sessionStorage.setItem("openid",e.data.openid),sessionStorage.setItem("role",e.data.role),sessionStorage.setItem("phone",e.data.phone),sessionStorage.setItem("merchant",e.data.merchant),sessionStorage.setItem("merchant_name",e.data.merchant_name)):t.$router.push({name:"login",query:{user_id:e.data.user_id}}))}),(function(t){alert(t)}))},methods:{changeTabs:function(){switch(this.active){case"counterManage":this.curTitle="货机管理";break;case"orderManage":this.curTitle="订单管理";break;default:break}},onClickLeft:function(){this.$router.go(-1)}}},kt=yt,Ct=(a("b31a"),Object(x["a"])(kt,Y,Z,!1,null,"1520a3fc",null)),wt=Ct.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{title:"登录","left-text":"取消"},on:{"click-left":t.onClickLeft}}),a("van-cell-group",{staticStyle:{"margin-top":"2rem"}},[a("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入手机号","use-button-slot":""},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}},[a("van-button",{attrs:{slot:"button",disabled:t.isSend,size:"small",type:"primary"},on:{click:t.getCode},slot:"button"},[t._v("获取验证码")])],1),a("van-field",{attrs:{placeholder:"请输入短信验证码"},model:{value:t.verification_code,callback:function(e){t.verification_code=e},expression:"verification_code"}})],1),a("van-button",{staticClass:"submitBtn",attrs:{round:"",type:"warning"},on:{click:t.submit}},[t._v("确定")])],1)},$t=[],xt={data:function(){return{tel:"",verification_code:"",isSend:!1}},methods:{onClickLeft:function(){this.$router.go(-1)},getCode:function(){var t=this;this.tel?q("/api/sms/mp/send",{tel:this.tel},"post").then((function(e){200==e.status?(t.$toast(e.message),t.isSend=!0):t.$toast(e.message)}),(function(t){alert(t)})):this.$toast("请输入电话号码！")},submit:function(){var t=this;q("/api/oauth/tel/bind",{user_id:sessionStorage.getItem("user_id"),tel:this.tel,verification_code:this.verification_code},"post").then((function(e){200==e.status?(sessionStorage.setItem("avatar",e.data.avatar),sessionStorage.setItem("name",e.data.name),sessionStorage.setItem("openid",e.data.openid),sessionStorage.setItem("role",e.data.role),sessionStorage.setItem("phone",e.data.phone),sessionStorage.setItem("merchant",e.data.merchant),sessionStorage.setItem("merchant_name",e.data.merchant_name),t.$router.push({path:"/index"})):t.$toast(e.message)}),(function(t){alert(t)}))}}},It=xt,Pt=(a("fe8d"),Object(x["a"])(It,St,$t,!1,null,"854d3682",null)),Ot=Pt.exports,jt=[{path:"/",component:wt,name:"index"},{path:"/login",component:Ot,name:"login"},{path:"/counterDetail",component:K,name:"counterDetail"},{path:"/counterSupply",component:N,name:"counterSupply"},{path:"/counterSupOnce",component:X,name:"counterSupOnce"}],Lt=new O["a"]({routes:jt}),Tt=Lt;k["a"].use(O["a"]),k["a"].use(y["a"]),k["a"].use(_["a"]).use(b["a"]),k["a"].use(g["a"]),k["a"].use(h["a"]),k["a"].use(p["a"]),k["a"].use(v["a"]).use(m["a"]),k["a"].use(f["a"]),k["a"].use(l["a"]).use(d["a"]),k["a"].use(u["a"]),k["a"].use(c["a"]),k["a"].use(i["a"]),k["a"].use(r["a"]),k["a"].use(s["a"]),k["a"].use(o["a"]),k["a"].use(n["a"]),k["a"].config.productionTip=!1;var Mt=new k["a"]({el:"#app",router:Tt,render:function(t){return t(P)}});e["default"]=Mt},"657d":function(t,e,a){},"6f44":function(t,e,a){},"750a":function(t,e,a){},"7c6f":function(t,e,a){"use strict";var n=a("e8e5"),o=a.n(n);o.a},8937:function(t,e,a){},9671:function(t,e,a){"use strict";var n=a("2110"),o=a.n(n);o.a},b030:function(t,e,a){"use strict";var n=a("750a"),o=a.n(n);o.a},b31a:function(t,e,a){"use strict";var n=a("8937"),o=a.n(n);o.a},b8d7:function(t,e,a){"use strict";var n=a("657d"),o=a.n(n);o.a},cd29:function(t,e,a){},d270:function(t,e,a){"use strict";var n=a("eb01"),o=a.n(n);o.a},e8e5:function(t,e,a){},eb01:function(t,e,a){},fe8d:function(t,e,a){"use strict";var n=a("cd29"),o=a.n(n);o.a}});
//# sourceMappingURL=app.8a6f970a.js.map